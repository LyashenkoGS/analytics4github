<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Statistics by project</title>
    <link rel="shortcut icon" type="image/png" href="favicon.png"/>
    <script src="https://code.jquery.com/jquery-3.1.0.js"
            integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="
            crossorigin="anonymous"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
</head>
<body>

<div id="container"
     style="max-width: 600px;min-width: 310px; height: 300px;margin-left: auto;margin-right: auto;text-align: center"></div>

</body>
<script type="application/javascript">
    $(function () {
        /**
         * Get stargazers per week json and display as a column chart
         */
        $.ajax({
                   //need to use http explicitly to develop front-end independently
                   url: "/stargazers",
                   beforeSend: function () {
                       console.log("before")
                       $('#container')
                               .html("<img src='https://assets-cdn.github.com/images/spinners/octocat-spinner-128.gif' />");
                   }
               })
                .done(function (msg) {
                    var response = msg;
                    console.log(msg)
                    $('#container').highcharts({
                                                   chart: {
                                                       type: 'column'
                                                   },
                                                   title: {
                                                       style: {
                                                           "display": "none"
                                                       }
                                                   },
                                                   xAxis: {
                                                       categories: [
                                                           'Mon',
                                                           'Tue',
                                                           'Wed',
                                                           'Thu',
                                                           'Fri',
                                                           'Sat',
                                                           'Sun'
                                                       ]
                                                   },
                                                   yAxis: {
                                                       min: 0
                                                   },
                                                   tooltip: {
                                                       headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                                                       pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>'
                                                                    +
                                                                    '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
                                                       footerFormat: '</table>',
                                                       shared: true,
                                                       useHTML: true
                                                   },
                                                   plotOptions: {
                                                       column: {
                                                           pointPadding: 0.1,
                                                           borderWidth: 0,
                                                           groupPadding: 0
                                                       }
                                                   },
                                                   series: response
                                               });
                })
                .fail(function (jqXHR, textStatus) {
                    alert("Request failed: " + textStatus);
                });

    });
</script>
</html>